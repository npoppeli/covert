<!--! content -->
<form class="form-horizontal" action="${this['buttons'][0]['action']}" method="POST"
      tal:define="labels this['labels']; controls this['controls']; content this['content']">
  <fieldset>
    <input tal:condition="this['method']" type="hidden" name="_method" value="${this['method']}"/>
    <span tal:repeat="key [key for key in labels.keys() if key == '']" tal:omit-tag="">
      <input type="hidden" name="${key}" value="${content[key]['value']}"/>
    </span>
    <div tal:repeat="key [key for key in labels.keys() if key != '']">
      <label tal:define="label labels[key]"
             for="${key}" class="col-sm-3 control-label">${label}</label>
        <div class="col-sm-7"
             tal:define="value content[key]; control controls[key]" tal:switch="control['control']">
          <div class="form-control" tal:case="'radio'">
            <span tal:repeat="option control['range']" tal:omit-tag="">
              <label tal:define="subkey key+'_'+str(repeat.option.index)" class="radio-inline" for="${subkey}">
                <input type="radio" name="${key}" id="${subkey}"
                       tal:attributes="checked 'checked' if content[key]==option  else default"
                       value="${repeat.option.index}"/>${option}</label>
            </span>
          </div>
          <span tal:case="'input'" tal:omit-tag="">
            <input class="form-control" type="${control['type']}" name="${key}" id="${key}" value="${value}"/>
          </span>
          <span tal:case="'textarea'" tal:omit-tag="">
            <textarea class="form-control" rows="4" cols="50" name="${key}" id="${key}">${value}</textarea>
          </span>
        </div>
      </div>
  </fieldset>
<!--! buttons -->
  <div class="col-sm-offset-3">
    <button tal:repeat="button this['buttons']" class="btn btn-primary btn-sm"
            type="submit" name="_submit" value="${button['name']}"><span class="${button['icon']}"></span>${button['label']}</button>&nbsp;
  </div>
</form>
<!--! feedback -->
<div class="row" tal:condition="this['feedback']">
  <p><span tal:content="structure this['feedback']"></p>
</div>
